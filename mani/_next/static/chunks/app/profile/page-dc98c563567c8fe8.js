(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6636,6648],{20063:(e,t,r)=>{"use strict";var a=r(47260);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},27076:(e,t,r)=>{"use strict";r.d(t,{default:()=>g});var a=r(95155),s=r(12115),i=r(71847);let l=(0,i.A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var n=r(75801);let o=(0,i.A)("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);var d=r(20063),c=r(96648);function u(e){let{profile:t,onEditClick:r,stats:s}=e,{name:i,designation:d,tagline:c,imageUrl:u}=t;return(0,a.jsxs)("section",{className:"relative rounded-2xl border border-border bg-card/70 p-6 md:p-8 shadow-sm","aria-labelledby":"profile-card-title",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"absolute right-3 top-3 z-10 inline-flex items-center justify-center rounded-md bg-white/10 p-2 text-foreground ring-1 ring-white/10 hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-amber-500","aria-label":"Edit profile",title:"Edit profile",children:(0,a.jsx)(l,{size:16})}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[(0,a.jsx)("div",{className:"shrink-0",children:u?(0,a.jsx)("img",{src:u,alt:"".concat(i||"User"," profile photo"),className:"h-32 w-32 md:h-40 md:w-40 rounded-full object-cover ring-4 ring-[#D4AF37] transition-transform duration-300 hover:scale-[1.02]"}):(0,a.jsx)("div",{"aria-label":"Loading profile photo",className:"h-32 w-32 md:h-40 md:w-40 rounded-full ring-4 ring-[#D4AF37] bg-white/10 animate-pulse"})}),(0,a.jsxs)("div",{className:"text-center md:text-left",children:[(0,a.jsx)("p",{className:"text-xs tracking-widest font-semibold uppercase mb-1 text-amber-300",children:d}),(0,a.jsx)("h1",{id:"profile-card-title",className:"text-2xl md:text-3xl font-extrabold text-foreground",children:i}),(0,a.jsx)("p",{className:"mt-2 italic text-muted-foreground",children:c}),s&&(s.count>0||s.total>0)&&(0,a.jsxs)("div",{className:"mt-3 flex items-center justify-center md:justify-start gap-2",children:[(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full border border-border bg-white/5 px-2.5 py-1 text-xs text-foreground",children:[(0,a.jsx)(n.A,{size:14})," ",s.count," donations"]}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full border border-border bg-white/5 px-2.5 py-1 text-xs text-foreground",children:[(0,a.jsx)(o,{size:14})," â‚¹",(s.total||0).toLocaleString()]})]})]})]})]})}function h(e){let{bioParagraphs:t,highlights:r}=e;return(0,a.jsxs)("section",{className:"rounded-2xl border border-border bg-card/70 p-6 md:p-8 shadow-sm","aria-labelledby":"about-section-title",children:[(0,a.jsx)("h2",{id:"about-section-title",className:"text-xl md:text-2xl font-bold mb-4 text-foreground",children:"About"}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[null==t?void 0:t.map((e,t)=>(0,a.jsx)("p",{className:"leading-relaxed text-muted-foreground",children:e},t)),(null==r?void 0:r.length)?(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 text-foreground",children:"Highlights"}),(0,a.jsx)("ul",{className:"list-disc pl-5 space-y-1",children:r.map((e,t)=>(0,a.jsx)("li",{className:"text-sm text-muted-foreground",children:e},t))})]}):null]})})]})}let m={name:"",designation:"",tagline:"",imageUrl:"",bioParagraphs:[],highlights:[],donateHref:"/donate",campaigns:[]};function g(e){let{profile:t=m}=e,[r,i]=(0,s.useState)(t),[l,n]=(0,s.useState)([]),o=(0,d.useRouter)();(0,s.useEffect)(()=>{let e=(0,c.getSupabaseBrowserClient)(),t=async()=>{try{let{data:t}=await e.auth.getUser(),r=null==t?void 0:t.user;if(!r)return;let{data:a,error:s}=await e.from("Profile-Table").select("*").eq("user_id",r.id).maybeSingle();if(s||!a){let t=await e.from("Profile-Table").select("*").eq("id",r.id).maybeSingle();a=t.data,s=t.error}!s&&a&&i(e=>({...e,name:a.name||a.full_name||e.name,designation:a.designation||e.designation,tagline:a.tagline||e.tagline,imageUrl:a.image_url||a.avatar_url||e.imageUrl,bioParagraphs:Array.isArray(a.bio_paragraphs)?a.bio_paragraphs:e.bioParagraphs,highlights:Array.isArray(a.highlights)?a.highlights:e.highlights}))}catch(e){}};t();let{data:r}=e.auth.onAuthStateChange((e,r)=>{(null==r?void 0:r.user)&&t()});return()=>{var e,t;return null==(t=r.subscription)||null==(e=t.unsubscribe)?void 0:e.call(t)}},[]);let g=(0,s.useMemo)(()=>{let e=l.reduce((e,t)=>e+(Number(null==t?void 0:t.amount)||0),0);return{count:l.length,total:e}},[l]);return(0,a.jsx)("main",{className:"min-h-screen bg-background text-foreground","aria-label":"Profile page",children:(0,a.jsxs)("div",{className:"mx-auto max-w-6xl px-4 pt-28 pb-12 md:pb-16 space-y-6",children:[(0,a.jsx)(u,{profile:r,onEditClick:()=>o.push("/profile/edit"),stats:g}),(0,a.jsx)(h,{bioParagraphs:r.bioParagraphs,highlights:r.highlights})]})})}},48210:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var a=r(95155);function s(e){let{children:t}=e;return(0,a.jsx)(a.Fragment,{children:t})}r(12115)},52902:(e,t,r)=>{Promise.resolve().then(r.bind(r,48210)),Promise.resolve().then(r.bind(r,27076))},71847:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(12115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:u,...h}=e;return(0,a.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:r,strokeWidth:o?24*Number(n)/Number(s):n,className:i("lucide",d),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{className:o,...d}=r;return(0,a.createElement)(n,{ref:l,iconNode:t,className:i("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...d})});return r.displayName=s(e),r}},75801:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("heart-handshake",[["path",{d:"M19.414 14.414C21 12.828 22 11.5 22 9.5a5.5 5.5 0 0 0-9.591-3.676.6.6 0 0 1-.818.001A5.5 5.5 0 0 0 2 9.5c0 2.3 1.5 4 3 5.5l5.535 5.362a2 2 0 0 0 2.879.052 2.12 2.12 0 0 0-.004-3 2.124 2.124 0 1 0 3-3 2.124 2.124 0 0 0 3.004 0 2 2 0 0 0 0-2.828l-1.881-1.882a2.41 2.41 0 0 0-3.409 0l-1.71 1.71a2 2 0 0 1-2.828 0 2 2 0 0 1 0-2.828l2.823-2.762",key:"17lmqv"}]])},96648:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getSupabaseBrowserClient:()=>i});var a=r(85553);let s=globalThis;function i(){let e="https://lszcuaduebvabtifhbgp.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxzemN1YWR1ZWJ2YWJ0aWZoYmdwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkzOTk5NTIsImV4cCI6MjA3NDk3NTk1Mn0.voMu1-4SKxSjZ1LK6x7shGKFI37YW8PtLFJKpPYvCAM";if(!e||!t)throw Error("Supabase env vars missing. Set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY.");let r=function(e,t){try{let t=new URL(e).host.split(".")[0];return"ayya.supabase.".concat(t,".auth.v1")}catch(e){return"ayya.supabase.".concat((t||"").slice(0,8),".auth.v1")}}(e,t);if(s.__supabaseClients[r])return s.__supabaseClients[r];let i=(0,a.UU)(e,t,{auth:{persistSession:!0,autoRefreshToken:!0,flowType:"pkce",detectSessionInUrl:!0,storageKey:r},global:{headers:{"x-ayya-client":"web"}},realtime:{params:{eventsPerSecond:2}}});return s.__supabaseClients[r]=i,i}null!=s.__supabaseClients||(s.__supabaseClients={})}},e=>{e.O(0,[1029,5553,8441,1255,7358],()=>e(e.s=52902)),_N_E=e.O()}]);