(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6502],{20063:(e,t,a)=>{"use strict";var s=a(47260);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},33946:(e,t,a)=>{"use strict";a.d(t,{M:()=>r,S:()=>o});var s=a(95155),i=a(12115),n=a(65034);let l=(0,i.createContext)(null);function r(){let e=(0,i.useContext)(l);return e||{show:e=>{var t;let a="".concat(null!=(t=e.title)?t:"").concat(e.description?": ".concat(e.description):"").trim();try{a&&window.alert(a)}catch(e){}}}}function o(e){let{children:t}=e,[a,r]=(0,i.useState)([]),[o,c]=(0,i.useState)(!1);(0,i.useEffect)(()=>c(!0),[]);let d=(0,i.useCallback)(e=>{var t,a,s;let i=Date.now()+Math.floor(1e3*Math.random()),n={id:i,title:null!=(t=e.title)?t:"",description:null!=(a=e.description)?a:"",variant:null!=(s=e.variant)?s:"info",durationMs:"number"==typeof e.durationMs?e.durationMs:3e3};r(e=>[...e,n]),n.durationMs&&n.durationMs>0&&setTimeout(()=>{r(e=>e.filter(e=>e.id!==i))},n.durationMs)},[]),m=(0,i.useMemo)(()=>({show:d}),[d]);return(0,s.jsxs)(l.Provider,{value:m,children:[t,o?(0,s.jsx)("div",{suppressHydrationWarning:!0,className:"pointer-events-none fixed bottom-4 right-4 z-50 flex w-[92vw] max-w-md flex-col-reverse gap-3 sm:w-auto",children:a.map(e=>(0,s.jsx)("div",{className:"pointer-events-auto",children:(0,s.jsx)(n.A,{variant:e.variant,title:e.title,description:e.description})},e.id))}):null]})}},49231:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(95155),i=a(12115),n=a(71847);let l=(0,n.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),r=(0,n.A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),o=()=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 48 48",children:[(0,s.jsx)("path",{fill:"#FFC107",d:"M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8-6.627 0-12-5.373-12-12s12-5.373 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4 12.955 4 4 12.955 4 24s8.955 20 20 20 20-8.955 20-20c0-2.641-.21-5.236-.611-7.743z"}),(0,s.jsx)("path",{fill:"#FF3D00",d:"M6.306 14.691l6.571 4.819C14.655 15.108 18.961 12 24 12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4 16.318 4 9.656 8.337 6.306 14.691z"}),(0,s.jsx)("path",{fill:"#4CAF50",d:"M24 44c5.166 0 9.86-1.977 13.409-5.192l-6.19-5.238C29.211 35.091 26.715 36 24 36c-5.202 0-9.619-3.317-11.283-7.946l-6.522 5.025C9.505 39.556 16.227 44 24 44z"}),(0,s.jsx)("path",{fill:"#1976D2",d:"M43.611 20.083H42V20H24v8h11.303c-.792 2.237-2.231 4.166-4.087 5.571l6.19 5.238C42.022 35.026 44 30.038 44 24c0-2.641-.21-5.236-.611-7.743z"})]}),c=e=>{let{children:t}=e;return(0,s.jsx)("div",{className:"rounded-2xl border border-border bg-foreground/5 backdrop-blur-sm transition-colors focus-within:border-violet-400/70 focus-within:bg-violet-500/10",children:t})},d=e=>{let{testimonial:t,delay:a}=e;return(0,s.jsxs)("div",{className:"animate-testimonial ".concat(a," flex items-start gap-3 rounded-3xl bg-card/40 dark:bg-zinc-800/40 backdrop-blur-xl border border-white/10 p-5 w-64"),children:[(0,s.jsx)("img",{src:t.avatarSrc,className:"h-10 w-10 object-cover rounded-2xl",alt:"avatar"}),(0,s.jsxs)("div",{className:"text-sm leading-snug",children:[(0,s.jsx)("p",{className:"flex items-center gap-1 font-medium",children:t.name}),(0,s.jsx)("p",{className:"text-muted-foreground",children:t.handle}),(0,s.jsx)("p",{className:"mt-1 text-foreground/80",children:t.text})]})]})},m=e=>{let{title:t=(0,s.jsx)("span",{className:"font-light text-foreground tracking-tighter",children:"Welcome"}),description:a="Access your account and continue your journey with us",heroImageSrc:n,testimonials:m=[],onSignIn:u,onGoogleSignIn:h,onResetPassword:x,onCreateAccount:f}=e,[p,g]=(0,i.useState)(!1);return(0,s.jsxs)("div",{className:"min-h-[100dvh] flex flex-col md:flex-row font-geist w-[100dvw] bg-background pb-24 sm:pb-20 [padding-bottom:env(safe-area-inset-bottom)]",children:[(0,s.jsx)("section",{className:"flex-1 flex items-center justify-center p-8",children:(0,s.jsx)("div",{className:"w-full max-w-md",children:(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsx)("h1",{className:"animate-element animate-delay-100 text-4xl md:text-5xl font-semibold leading-tight",children:t}),(0,s.jsx)("p",{className:"animate-element animate-delay-200 text-muted-foreground",children:a}),(0,s.jsxs)("form",{className:"space-y-5",onSubmit:u,children:[(0,s.jsxs)("div",{className:"animate-element animate-delay-300",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Email Address"}),(0,s.jsx)(c,{children:(0,s.jsx)("input",{name:"email",type:"email",placeholder:"Enter your email address",className:"w-full bg-transparent text-sm p-4 rounded-2xl focus:outline-none"})})]}),(0,s.jsxs)("div",{className:"animate-element animate-delay-400",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Password"}),(0,s.jsx)(c,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{name:"password",type:p?"text":"password",placeholder:"Enter your password",className:"w-full bg-transparent text-sm p-4 pr-12 rounded-2xl focus:outline-none"}),(0,s.jsx)("button",{type:"button",onClick:()=>g(!p),className:"absolute inset-y-0 right-3 flex items-center",children:p?(0,s.jsx)(l,{className:"w-5 h-5 text-muted-foreground hover:text-foreground transition-colors"}):(0,s.jsx)(r,{className:"w-5 h-5 text-muted-foreground hover:text-foreground transition-colors"})})]})})]}),(0,s.jsxs)("div",{className:"animate-element animate-delay-500 flex items-center justify-between text-sm",children:[(0,s.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",name:"rememberMe",className:"custom-checkbox"}),(0,s.jsx)("span",{className:"text-foreground/90",children:"Keep me signed in"})]}),(0,s.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),null==x||x()},className:"hover:underline text-violet-400 transition-colors",children:"Reset password"})]}),(0,s.jsx)("button",{type:"submit",className:"animate-element animate-delay-600 w-full rounded-2xl bg-primary py-4 font-medium text-primary-foreground hover:bg-primary/90 transition-colors",children:"Sign In"})]}),(0,s.jsxs)("div",{className:"animate-element animate-delay-700 relative flex items-center justify-center",children:[(0,s.jsx)("span",{className:"w-full border-t border-border"}),(0,s.jsx)("span",{className:"px-4 text-sm text-muted-foreground bg-background absolute",children:"Or continue with"})]}),(0,s.jsxs)("button",{onClick:h,className:"animate-element animate-delay-800 w-full flex items-center justify-center gap-3 border border-border rounded-2xl py-4 hover:bg-secondary transition-colors",children:[(0,s.jsx)(o,{}),"Continue with Google"]}),(0,s.jsxs)("p",{className:"animate-element animate-delay-900 text-center text-sm text-muted-foreground",children:["New to our platform? ",(0,s.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),null==f||f()},className:"text-violet-400 hover:underline transition-colors",children:"Create Account"})]})]})})}),n&&(0,s.jsxs)("section",{className:"hidden md:block flex-1 relative p-4",children:[(0,s.jsx)("div",{className:"animate-slide-right animate-delay-300 absolute inset-4 rounded-3xl bg-cover bg-center",style:{backgroundImage:"url(".concat(n,")")}}),m.length>0&&(0,s.jsxs)("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex gap-4 px-8 w-full justify-center",children:[(0,s.jsx)(d,{testimonial:m[0],delay:"animate-delay-1000"}),m[1]&&(0,s.jsx)("div",{className:"hidden xl:flex",children:(0,s.jsx)(d,{testimonial:m[1],delay:"animate-delay-1200"})}),m[2]&&(0,s.jsx)("div",{className:"hidden 2xl:flex",children:(0,s.jsx)(d,{testimonial:m[2],delay:"animate-delay-1400"})})]})]})]})};var u=a(33946),h=a(20063);let x=[];function f(){let e=(0,h.useRouter)(),{show:t}=(0,u.M)(),i=Array.from(new Set([..."ssabarisasthass@gmail.com".split(/[\s,;]+/).filter(Boolean),"ssabarisasthass@gmail.com"])),n=async s=>{var n,l,r,o,c,d,m,u;s.preventDefault();let h=s.currentTarget,x=null==(l=h.elements.namedItem("email"))||null==(n=l.value)?void 0:n.trim().toLowerCase(),f=null==(r=h.elements.namedItem("password"))?void 0:r.value;if(!x||!f)return void t({title:"Missing details",description:"Please enter email and password.",variant:"warning"});if(i.includes(x.toLowerCase()))try{let a=await fetch("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:x,password:f})}),s=a.headers.get("content-type")||"",i=null;if(s.includes("application/json")&&(i=await a.json().catch(()=>null)),(null==i?void 0:i.ok)===!0)return void e.replace("/admin/");if(s.includes("application/json")&&a.status&&404!==a.status){let e=i||{};t({title:"Admin API unavailable",description:(null==e?void 0:e.error)||"Continuing with normal sign-inâ€¦",variant:"info"})}}catch(e){}try{let e=await fetch("/api/auth/check-email?email=".concat(encodeURIComponent(x)));if(e.ok){let a=await e.json();if((null==a?void 0:a.exists)===!0){let e=Array.isArray(a.providers)?a.providers:[],s=e.includes("google"),i=e.includes("email");s&&!i&&t({title:"Google-linked email",description:"This email was previously used with Google. If password sign-in fails, use 'Continue with Google' or set a password via Sign Up/OTP or Forgot Password.",variant:"info",durationMs:5e3})}}}catch(e){}0;let{getSupabaseBrowserClient:p}=await Promise.all([a.e(1029),a.e(5553),a.e(6648)]).then(a.bind(a,96648)),g=p(),{data:v,error:b}=await g.auth.signInWithPassword({email:x,password:f});if(b){let e=/email not confirmed/i.test(b.message),a=/invalid login|invalid credentials|email not confirmed/i.test(b.message)?"\nIf you previously used Google with this email, please use 'Continue with Google'.":"";if(t({title:"Sign-in failed",description:b.message+a,variant:"error",durationMs:5e3}),e)try{let e="https://sabarisastha.org".replace(/\/$/,"");(await g.auth.resend({type:"signup",email:x,options:{emailRedirectTo:"".concat(e,"/auth/callback")}})).error||t({title:"Verification email resent",description:"Check your inbox to confirm, then sign in.",variant:"info",durationMs:6e3})}catch(e){}return}try{let a=v.user;if(a){let s=new URLSearchParams(window.location.search).get("next"),i=((null==(o=a.user_metadata)?void 0:o.full_name)||(null==(c=a.user_metadata)?void 0:c.name)||"").toString();for(let e of[{user_id:a.id,email:null!=(d=a.email)?d:x,name:i,full_name:i},{id:a.id,email:null!=(m=a.email)?m:x,name:i,full_name:i}])if(!(await g.from("Profile-Table").upsert(e,{onConflict:Object.keys(e)[0]}).select("*")).error)break;let{data:n}=await g.from("Profile-Table").select("*").eq("user_id",a.id).maybeSingle();n||(n=null!=(u=(await g.from("Profile-Table").select("*").eq("id",a.id).maybeSingle()).data)?u:null);let l=((null==n?void 0:n.name)||(null==n?void 0:n.full_name)||i||a.email||x||"").toString();t({title:"Welcome",description:"".concat(l),variant:"success"}),e.replace(s||"/");return}}catch(e){}e.replace("/")},l=async()=>{try{let{getSupabaseBrowserClient:e}=await Promise.all([a.e(1029),a.e(5553),a.e(6648)]).then(a.bind(a,96648)),s=e(),i=new URLSearchParams(window.location.search).get("next")||"/";try{sessionStorage.setItem("ayya.auth.next",i)}catch(e){}let n=window.location.origin.replace(/\/$/,""),{error:l}=await s.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(n,"/auth/callback"),queryParams:{prompt:"select_account"}}});l&&t({title:"Sign-in failed",description:l.message,variant:"error"})}catch(e){t({title:"Google sign-in unavailable",description:String((null==e?void 0:e.message)||"Auth not configured"),variant:"warning"})}},r=async()=>{e.push("/auth/forgot-password/")};return(0,s.jsx)("div",{className:"bg-background text-foreground",children:(0,s.jsx)(m,{title:(0,s.jsx)("span",{className:"tracking-tight",children:"Sree Sabari Sastha Seva Samithi (SSSSS)"}),description:(0,s.jsxs)("span",{className:"block text-sm",children:["Sign in to manage donations, volunteer slots, and save favorites.",(0,s.jsxs)("span",{className:"mt-2 block text-xs text-amber-500/90",children:["By continuing, you agree to our ",(0,s.jsx)("a",{className:"underline underline-offset-4 hover:text-amber-400",href:"/terms",children:"Terms & Conditions"}),"."]})]}),heroImageSrc:"/signin.jpeg",testimonials:x,onSignIn:n,onGoogleSignIn:l,onResetPassword:r,onCreateAccount:()=>{e.push("/sign-up/")}})})}},64269:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(2821),i=a(75889);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.QP)((0,s.$)(t))}},65034:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var s=a(95155),i=a(12115),n=a(24342),l=a(951),r=a(61362),o=a(65229),c=a(52056),d=a(23327),m=a(64269);let u={success:(0,s.jsx)(r.A,{className:"h-6 w-6"}),error:(0,s.jsx)(o.A,{className:"h-6 w-6"}),warning:(0,s.jsx)(c.A,{className:"h-6 w-6"}),info:(0,s.jsx)(d.A,{className:"h-6 w-6"})};function h(e){let{variant:t="success",title:a="Default Alert Title",description:r="This is a default description for the alert. You can customize this text by passing props."}=e,[c,d]=(0,i.useState)(!0);return(0,s.jsx)(n.N,{children:c&&(0,s.jsxs)(l.P.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-10},transition:{duration:.25},className:(0,m.cn)("relative w-full max-w-md mx-auto p-4 rounded-2xl shadow-lg border","bg-white text-black border-black/10"),role:"status","aria-live":"polite",children:[(0,s.jsx)("button",{onClick:()=>d(!1),className:"absolute top-3 right-3 rounded-full p-1 hover:bg-black/10 transition","aria-label":"Dismiss alert",children:(0,s.jsx)(o.A,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0 font-normal",children:u[t]}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("h4",{className:"text-base font-semibold",children:a}),r&&(0,s.jsx)("p",{className:"text-sm text-black opacity-80 mt-1",children:r})]})]})]})})}},75818:(e,t,a)=>{Promise.resolve().then(a.bind(a,49231))}},e=>{e.O(0,[951,4909,2090,8441,1255,7358],()=>e(e.s=75818)),_N_E=e.O()}]);