(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3698,6648],{20063:(e,t,s)=>{"use strict";var a=s(47260);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},32563:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(95155),l=s(12115),n=s(20063),r=s(33946),i=s(96648);function o(){let[e,t]=(0,l.useState)(null),s=(0,n.useRouter)(),[o,d]=(0,l.useState)(""),[c,u]=(0,l.useState)(""),[m,x]=(0,l.useState)(""),[h,p]=(0,l.useState)(""),[b,g]=(0,l.useState)(""),[f,N]=(0,l.useState)("all"),[v,j]=(0,l.useState)(""),[S,w]=(0,l.useState)("all"),[y,C]=(0,l.useState)(null),[k,_]=(0,l.useState)(!1),[I,A]=(0,l.useState)(null),[P,L]=(0,l.useState)(null),[M,E]=(0,l.useState)(!1),[T,U]=(0,l.useState)(null),[B,J]=(0,l.useState)(""),[z,O]=(0,l.useState)(""),[R,Y]=(0,l.useState)(null),[D,F]=(0,l.useState)(!1),[W,Z]=(0,l.useState)(null),[K,X]=(0,l.useState)(""),[V,q]=(0,l.useState)(""),[G,Q]=(0,l.useState)(null),[H,$]=(0,l.useState)(!1),[ee,et]=(0,l.useState)(null),[es,ea]=(0,l.useState)(""),[el,en]=(0,l.useState)(""),[er,ei]=(0,l.useState)("all"),[eo,ed]=(0,l.useState)(null),[ec,eu]=(0,l.useState)(!1),[em,ex]=(0,l.useState)(null),[eh,ep]=(0,l.useState)(!1),[eb,eg]=(0,l.useState)(null),{show:ef}=(0,r.M)(),eN="ssabarisasthass@gmail.com".split(/[\s,;]+/).filter(Boolean);(0,l.useEffect)(()=>{(async()=>{try{let e=(0,i.getSupabaseBrowserClient)(),{data:s}=await e.auth.getUser(),a=null==s?void 0:s.user,l=!!a&&(0===eN.length||eN.includes((a.email||"").toLowerCase()));t(l)}catch(e){t(!1)}})()},[]);let ev=async e=>{e.preventDefault(),ep(!0),eg(null);try{let e=(0,i.getSupabaseBrowserClient)(),{data:s,error:a}=await e.auth.signInWithPassword({email:o,password:c});if(a){eg(a.message||"Login failed"),t(!1);return}let l=s.user;if(!(l&&(0===eN.length||eN.includes((l.email||"").toLowerCase())))){eg("This account is not authorized for admin."),await e.auth.signOut(),t(!1);return}t(!0),ef({title:"Welcome, Admin",description:"Logged in successfully.",variant:"success"})}finally{ep(!1)}},ej=async()=>{try{let e=(0,i.getSupabaseBrowserClient)();await e.auth.signOut()}catch(e){}t(!1),ef({title:"Logged out",description:"Admin session ended.",variant:"info"}),window.location.assign("/")};return null===e?(0,a.jsx)("main",{className:"min-h-screen grid place-items-center",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Checking admin session…"})}):e?(0,a.jsx)("main",{className:"min-h-screen p-6 md:p-10",children:(0,a.jsxs)("div",{className:"mx-auto max-w-3xl",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-center",children:"Admin Panel"}),(0,a.jsx)("div",{className:"mt-2 flex justify-end",children:(0,a.jsx)("button",{onClick:ej,className:"rounded border px-3 py-1.5",children:"Logout"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("button",{onClick:()=>s.push("/admin/export"),className:"rounded-xl border p-5 text-left bg-card/70 hover:bg-card transition shadow-sm",children:[(0,a.jsx)("div",{className:"text-lg font-semibold",children:"Export Data"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Download all sections"})]}),(0,a.jsxs)("button",{onClick:()=>s.push("/admin/annadanam"),className:"rounded-xl border p-5 text-left bg-card/70 hover:bg-card transition shadow-sm",children:[(0,a.jsx)("div",{className:"text-lg font-semibold",children:"Annadanam"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Filter and export bookings"})]}),(0,a.jsxs)("button",{onClick:()=>s.push("/admin/pooja"),className:"rounded-xl border p-5 text-left bg-card/70 hover:bg-card transition shadow-sm",children:[(0,a.jsx)("div",{className:"text-lg font-semibold",children:"Pooja"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Filter and export bookings"})]}),(0,a.jsxs)("button",{onClick:()=>s.push("/admin/donations"),className:"rounded-xl border p-5 text-left bg-card/70 hover:bg-card transition shadow-sm",children:[(0,a.jsx)("div",{className:"text-lg font-semibold",children:"Donations"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Load and download"})]}),(0,a.jsxs)("button",{onClick:()=>s.push("/admin/contact"),className:"rounded-xl border p-5 text-left bg-card/70 hover:bg-card transition shadow-sm",children:[(0,a.jsx)("div",{className:"text-lg font-semibold",children:"Contact Messages"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Load and export"})]}),(0,a.jsxs)("button",{onClick:()=>s.push("/admin/volunteers"),className:"rounded-xl border p-5 text-left bg-card/70 hover:bg-card transition shadow sm",children:[(0,a.jsx)("div",{className:"text-lg font-semibold",children:"Volunteers"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Load and export"})]})]})]})}):(0,a.jsx)("main",{className:"min-h-screen grid place-items-center p-4",children:(0,a.jsxs)("form",{onSubmit:ev,className:"w-full max-w-sm space-y-4 border rounded-xl p-6 shadow bg-card/70",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Admin Login"}),eb&&(0,a.jsx)("p",{className:"text-sm text-red-600",role:"alert",children:eb}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm",htmlFor:"email",children:"Email"}),(0,a.jsx)("input",{id:"email",type:"email",required:!0,className:"w-full rounded border px-3 py-2 bg-background",value:o,onChange:e=>d(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm",htmlFor:"password",children:"Password"}),(0,a.jsx)("input",{id:"password",type:"password",required:!0,className:"w-full rounded border px-3 py-2 bg-background",value:c,onChange:e=>u(e.target.value)})]}),(0,a.jsx)("button",{type:"submit",disabled:eh,className:"w-full rounded bg-black text-white py-2 disabled:opacity-60",children:eh?"Signing in…":"Sign In"})]})})}},33946:(e,t,s)=>{"use strict";s.d(t,{M:()=>i,S:()=>o});var a=s(95155),l=s(12115),n=s(65034);let r=(0,l.createContext)(null);function i(){let e=(0,l.useContext)(r);return e||{show:e=>{var t;let s="".concat(null!=(t=e.title)?t:"").concat(e.description?": ".concat(e.description):"").trim();try{s&&window.alert(s)}catch(e){}}}}function o(e){let{children:t}=e,[s,i]=(0,l.useState)([]),[o,d]=(0,l.useState)(!1);(0,l.useEffect)(()=>d(!0),[]);let c=(0,l.useCallback)(e=>{var t,s,a;let l=Date.now()+Math.floor(1e3*Math.random()),n={id:l,title:null!=(t=e.title)?t:"",description:null!=(s=e.description)?s:"",variant:null!=(a=e.variant)?a:"info",durationMs:"number"==typeof e.durationMs?e.durationMs:3e3};i(e=>[...e,n]),n.durationMs&&n.durationMs>0&&setTimeout(()=>{i(e=>e.filter(e=>e.id!==l))},n.durationMs)},[]),u=(0,l.useMemo)(()=>({show:c}),[c]);return(0,a.jsxs)(r.Provider,{value:u,children:[t,o?(0,a.jsx)("div",{suppressHydrationWarning:!0,className:"pointer-events-none fixed bottom-4 right-4 z-50 flex w-[92vw] max-w-md flex-col-reverse gap-3 sm:w-auto",children:s.map(e=>(0,a.jsx)("div",{className:"pointer-events-auto",children:(0,a.jsx)(n.A,{variant:e.variant,title:e.title,description:e.description})},e.id))}):null]})}},57474:(e,t,s)=>{Promise.resolve().then(s.bind(s,32563))},64269:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(2821),l=s(75889);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.QP)((0,a.$)(t))}},65034:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var a=s(95155),l=s(12115),n=s(24342),r=s(951),i=s(61362),o=s(65229),d=s(52056),c=s(23327),u=s(64269);let m={success:(0,a.jsx)(i.A,{className:"h-6 w-6"}),error:(0,a.jsx)(o.A,{className:"h-6 w-6"}),warning:(0,a.jsx)(d.A,{className:"h-6 w-6"}),info:(0,a.jsx)(c.A,{className:"h-6 w-6"})};function x(e){let{variant:t="success",title:s="Default Alert Title",description:i="This is a default description for the alert. You can customize this text by passing props."}=e,[d,c]=(0,l.useState)(!0);return(0,a.jsx)(n.N,{children:d&&(0,a.jsxs)(r.P.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-10},transition:{duration:.25},className:(0,u.cn)("relative w-full max-w-md mx-auto p-4 rounded-2xl shadow-lg border","bg-white text-black border-black/10"),role:"status","aria-live":"polite",children:[(0,a.jsx)("button",{onClick:()=>c(!1),className:"absolute top-3 right-3 rounded-full p-1 hover:bg-black/10 transition","aria-label":"Dismiss alert",children:(0,a.jsx)(o.A,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 font-normal",children:m[t]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("h4",{className:"text-base font-semibold",children:s}),i&&(0,a.jsx)("p",{className:"text-sm text-black opacity-80 mt-1",children:i})]})]})]})})}},96648:(e,t,s)=>{"use strict";s.r(t),s.d(t,{getSupabaseBrowserClient:()=>n});var a=s(85553);let l=globalThis;function n(){let e="https://lszcuaduebvabtifhbgp.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxzemN1YWR1ZWJ2YWJ0aWZoYmdwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkzOTk5NTIsImV4cCI6MjA3NDk3NTk1Mn0.voMu1-4SKxSjZ1LK6x7shGKFI37YW8PtLFJKpPYvCAM";if(!e||!t)throw Error("Supabase env vars missing. Set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY.");let s=function(e,t){try{let t=new URL(e).host.split(".")[0];return"ayya.supabase.".concat(t,".auth.v1")}catch(e){return"ayya.supabase.".concat((t||"").slice(0,8),".auth.v1")}}(e,t);if(l.__supabaseClients[s])return l.__supabaseClients[s];let n=(0,a.UU)(e,t,{auth:{persistSession:!0,autoRefreshToken:!0,flowType:"pkce",detectSessionInUrl:!0,storageKey:s},global:{headers:{"x-ayya-client":"web"}},realtime:{params:{eventsPerSecond:2}}});return l.__supabaseClients[s]=n,n}null!=l.__supabaseClients||(l.__supabaseClients={})}},e=>{e.O(0,[1029,5553,951,4909,2090,8441,1255,7358],()=>e(e.s=57474)),_N_E=e.O()}]);